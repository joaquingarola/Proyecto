<app-navbar></app-navbar>
<div class="container">
  <div class="container__data">
    <h1 class="container__data__title">Lista de Mantemientos</h1>
    <table mat-table [dataSource]="maintenance" class="mat-elevation-z8">
      <ng-container matColumnDef="vehicle">
        <th mat-header-cell *matHeaderCellDef class="aaa"> Veh√≠culo </th>
        <td mat-cell *matCellDef="let maintenance"> {{maintenance.vehicle.patent}} - {{maintenance.vehicle.description}}</td>
      </ng-container>

      <ng-container matColumnDef="description">
        <th mat-header-cell *matHeaderCellDef> Descripcion </th>
        <td mat-cell *matCellDef="let maintenance"> {{maintenance.description}} </td>
      </ng-container>

      <ng-container matColumnDef="startDate">
        <th mat-header-cell *matHeaderCellDef> Fecha Inicio </th>
        <td mat-cell *matCellDef="let maintenance"> {{maintenance.startDate | date:'dd/MM/yyyy'}} </td>
      </ng-container>
        
      <ng-container matColumnDef="endDate">
        <th mat-header-cell *matHeaderCellDef> Fecha Fin </th>
        <td mat-cell *matCellDef="let maintenance"> {{maintenance.endDate ? (maintenance.endDate | date:'dd/MM/yyyy') : '-' }} </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> Estado </th>
        <td mat-cell *matCellDef="let maintenance"> {{maintenance.status}} </td>
      </ng-container>

      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef> Opciones </th>
        <td mat-cell *matCellDef="let maintenance">
          <mat-icon [ngClass]="{'disabled-icon': !(maintenance.status === statusEnum.InProgress)}" class="icon success-icon" (click)="finishMaintenance(maintenance)" title="Finalizar mantenimiento">check_circle</mat-icon> 
          <mat-icon [ngClass]="{'disabled-icon': (maintenance.status === statusEnum.Completed)}" class="icon edit-icon" title="Editar mantenimiento">edit</mat-icon>
          <mat-icon [ngClass]="{'disabled-icon': (maintenance.status === statusEnum.Completed)}" class="icon" color="warn" (click)="deleteMaintenance(maintenance.id)" title="Cancelar mantenimiento">cancel</mat-icon>
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>
</div>