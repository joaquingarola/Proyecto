<app-navbar></app-navbar>
  <div class="container" [ngClass]="{ 'loading': loading }">
    <div *ngIf="loading; else notLoading">
      <mat-spinner></mat-spinner>
    </div>
  </div>
<app-footer></app-footer>

<ng-template #notLoading>
  <div class="no-data" *ngIf="recolection == null">
    <img src="assets/no-recolection-found.png" alt="No se encontraron recolecciones">
    <div class="no-data__content">
      <p class="no-data__title">No se encontraron recolecciones</p>
      <p class="no-data__text">No tenes recolecciones en curso.<br> Podés iniciar una nueva recolección haciendo click <a href="./collector">acá</a>.</p>
    </div>
  </div>
  <div class="data" *ngIf="recolection != null">
    <div class="data__content">
      <div class="data__map">
        <app-map 
          [containersRecolection] = "containersRouteCoords"
          [selectedItem] = "vehicleCenter"
          [selectedLastItem] = "wasteCenter"
          [disabledClick] = "true"
          [sections] = "section"
        >
        </app-map>
      </div>
    </div>
    <div class="data__info" *ngIf="!recolectionCompleted">
      <p> <b>Recolección:</b> {{recolection.description }}</p>
      <p> <b>Próximo destino:</b> {{ isContainer ? nextDestination.address : finalDestination.address }}</p>
      <p> <b>Tipo:</b> {{ isContainer ? 'Contenedor' : 'Centro de Residuos' }}</p>
      <button 
        (click)="updateRoute()" 
        mat-raised-button color="primary" 
        class="container__add-button" 
        [class.spinner]="updateContainerLoading" 
        [disabled]="updateContainerLoading"> 
          {{ isContainer ? 'Marcar contenedor recolectado' : 'Camión descargado' }}
      </button>
    </div>
    <div class="data__info" *ngIf="recolectionCompleted">
      <p> <b>La recolección se ha completado exitosamente.</b></p>
      <p> Podés ver tus otras asignaciones <a href="./collector">acá.</a></p>
    </div>
  </div>
</ng-template>